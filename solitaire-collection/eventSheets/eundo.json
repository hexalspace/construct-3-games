{
	"name": "eUndo",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-touch-end",
					"objectClass": "Touch",
					"sid": 774389830518389
				},
				{
					"id": "is-touching-object",
					"objectClass": "Touch",
					"sid": 975191225535123,
					"parameters": {
						"object": "UndoButton"
					}
				},
				{
					"id": "compare-opacity",
					"objectClass": "UndoButton",
					"sid": 444681680219586,
					"parameters": {
						"comparison": 0,
						"opacity": "100"
					}
				}
			],
			"actions": [],
			"sid": 572230848063015,
			"children": [
				{
					"eventType": "variable",
					"name": "FromType",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 226585203836869
				},
				{
					"eventType": "variable",
					"name": "FromUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 681657479666601
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Card",
							"sid": 866228491232797,
							"parameters": {
								"unique-id": "UndoArray.At(UndoArray.Width - 1,0)"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ReturnCardToLastPosition",
							"sid": 575968148037609,
							"parameters": [
								"Card.UID",
								"UndoArray.At(UndoArray.Width - 1, 1)",
								"UndoArray.At(UndoArray.Width - 1, 2)",
								false
							]
						}
					],
					"sid": 250839644360086
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 645159203822701,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"StockFlip\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stock",
							"sid": 715742857300960,
							"parameters": {
								"unique-id": "FromUID"
							}
						}
					],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "Stock",
							"sid": 646925347541372,
							"parameters": {
								"instance-variable": "FlipsRemaining",
								"value": "1"
							}
						}
					],
					"sid": 305305729396155,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 708605901943074,
									"parameters": {
										"object": "Stock"
									}
								}
							],
							"actions": [],
							"sid": 891444293103329,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 107599965010977,
											"parameters": {
												"object": "Card",
												"expression": "Card.ZIndex",
												"order": "descending"
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "Card",
											"sid": 860173868054997,
											"parameters": {
												"x": "Discard.X",
												"y": "Discard.Y"
											}
										},
										{
											"id": "move-to-top",
											"objectClass": "Card",
											"sid": 646209440044935
										},
										{
											"id": "set-animation",
											"objectClass": "Card",
											"sid": 416709162202163,
											"parameters": {
												"animation": "DECK_ART",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "Card",
											"sid": 849592546479493,
											"parameters": {
												"frame-number": "Card.Frame"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "Card",
											"sid": 370146974759058,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "enabled"
											}
										}
									],
									"sid": 887034472931983
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "pop",
							"objectClass": "UndoArray",
							"sid": 477159171569524,
							"parameters": {
								"where": "back",
								"axis": "x"
							}
						}
					],
					"sid": 951167902352569
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-size",
					"objectClass": "UndoArray",
					"sid": 926349710520765,
					"parameters": {
						"axis": "x",
						"comparison": 0,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"id": "set-opacity",
					"objectClass": "UndoButton",
					"sid": 197436675094788,
					"parameters": {
						"opacity": "30"
					}
				}
			],
			"sid": 752739307022525
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 179068361355151
				}
			],
			"actions": [
				{
					"id": "set-opacity",
					"objectClass": "UndoButton",
					"sid": 458015452099820,
					"parameters": {
						"opacity": "100"
					}
				}
			],
			"sid": 764194001158981
		},
		{
			"functionName": "PushToUndoArray",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "CardUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 862626677932731
				},
				{
					"name": "FromType",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 986618021985952
				},
				{
					"name": "FromUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 618784523508909
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "push",
					"objectClass": "UndoArray",
					"sid": 536093857210066,
					"parameters": {
						"where": "back",
						"value": "CardUID",
						"axis": "x"
					}
				},
				{
					"id": "set-at-xy",
					"objectClass": "UndoArray",
					"sid": 714822212197016,
					"parameters": {
						"x": "UndoArray.Width - 1",
						"y": "1",
						"value": "FromType"
					}
				},
				{
					"id": "set-at-xy",
					"objectClass": "UndoArray",
					"sid": 806374374806442,
					"parameters": {
						"x": "UndoArray.Width - 1",
						"y": "2",
						"value": "FromUID"
					}
				}
			],
			"sid": 474556955649895,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 547513750902363,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"Foundation\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveCardFromFoundation",
							"sid": 654589341740390,
							"parameters": [
								"0",
								"FromUID"
							]
						}
					],
					"sid": 770827305267040
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 552787116957290,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"Tableau\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveCardFromTableau",
							"sid": 317129567313815,
							"parameters": [
								"0",
								"FromUID"
							]
						}
					],
					"sid": 444342415695872
				}
			]
		},
		{
			"functionName": "ReturnCardToLastPosition",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "CardUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 371815288763754
				},
				{
					"name": "FromType",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"sid": 772989341188485
				},
				{
					"name": "FromUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 395798620912525
				},
				{
					"name": "IsCancelingMove",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"sid": 418025627580096
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "Card",
					"sid": 210379781808546,
					"parameters": {
						"unique-id": "CardUID"
					}
				}
			],
			"actions": [
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 213931197106588,
					"parameters": {
						"type": "log",
						"message": "\"ReturnCardToLastPosition \" & FromType"
					}
				}
			],
			"sid": 197237194085310,
			"children": [
				{
					"eventType": "comment",
					"text": "returning from"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 292071718916385,
							"parameters": {
								"object": "Discard"
							}
						}
					],
					"actions": [],
					"sid": 331834194056964
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 161514355970620,
							"parameters": {
								"object": "Foundation"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveCardFromFoundation",
							"sid": 196995927735686,
							"parameters": [
								"Card.UID",
								"Foundation.UID"
							]
						}
					],
					"sid": 871608732345143
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 257469585195529,
							"parameters": {
								"object": "Stock"
							}
						}
					],
					"actions": [],
					"sid": 337872788355828
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 707532318571674,
							"parameters": {
								"object": "Tableau"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveCardFromTableau",
							"sid": 387320709612549,
							"parameters": [
								"Card.UID",
								"Tableau.UID"
							]
						}
					],
					"sid": 413501458414946
				},
				{
					"eventType": "comment",
					"text": "returning to"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 259464984773321,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"Discard\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Discard",
							"sid": 355677224574447,
							"parameters": {
								"unique-id": "FromUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Card",
							"sid": 846049557993667,
							"parameters": {
								"x": "Discard.X",
								"y": "Discard.Y"
							}
						}
					],
					"sid": 488807605715800
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 263682881176619,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"Foundation\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Foundation",
							"sid": 172659255957784,
							"parameters": {
								"unique-id": "FromUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveCardToFoundation",
							"sid": 399460390395300,
							"parameters": [
								"Card.UID",
								"Foundation.UID",
								false
							]
						}
					],
					"sid": 801272649245621
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 569958637077620,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"Stock\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stock",
							"sid": 881348620357661,
							"parameters": {
								"unique-id": "FromUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Card",
							"sid": 604401882740452,
							"parameters": {
								"animation": "DECK_ART & \"Backs\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Card",
							"sid": 428299866161163,
							"parameters": {
								"x": "Stock.X",
								"y": "Stock.Y"
							}
						},
						{
							"id": "move-to-top",
							"objectClass": "Card",
							"sid": 936033659211008
						},
						{
							"id": "set-enabled",
							"objectClass": "Card",
							"sid": 257596614322688,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 484892980046984
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 415016535441559,
							"parameters": {
								"variable": "FromType",
								"comparison": 0,
								"value": "\"Tableau\""
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Tableau",
							"sid": 465003135520723,
							"parameters": {
								"unique-id": "FromUID"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveCardToTableau",
							"sid": 427282543166415,
							"parameters": [
								"Card.UID",
								"Tableau.UID",
								false
							]
						}
					],
					"sid": 649487091183266
				}
			]
		}
	],
	"sid": 556817675701426
}