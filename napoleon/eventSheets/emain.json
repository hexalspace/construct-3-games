{
	"name": "eMain",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "eMenu"
		},
		{
			"eventType": "variable",
			"name": "DraggedFromUID",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 118215576682759
		},
		{
			"eventType": "variable",
			"name": "DraggedFromType",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 448739073713888
		},
		{
			"eventType": "variable",
			"name": "IsInMenu",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 510609366852547
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Init",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 588047351641378
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "DeckValues",
							"sid": 861076710937292,
							"parameters": {
								"json": "\"{\"\"c2array\"\":true,\"\"size\"\":[96,1,1],\"\"data\"\":[[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]]]}\""
							}
						},
						{
							"id": "load",
							"objectClass": "DeckSuits",
							"sid": 755157476614391,
							"parameters": {
								"json": "\"{\"\"c2array\"\":true,\"\"size\"\":[96,1,1],\"\"data\"\":[[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Yellow\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Brown\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Blue\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]],[[\"\"Pink\"\"]]]}\""
							}
						},
						{
							"id": "load",
							"objectClass": "UnshuffledFrames",
							"sid": 344083268283739,
							"parameters": {
								"json": "\"{\"\"c2array\"\":true,\"\"size\"\":[96,1,1],\"\"data\"\":[[[0]],[[1]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[14]],[[15]],[[16]],[[17]],[[18]],[[19]],[[20]],[[21]],[[22]],[[23]],[[24]],[[25]],[[26]],[[27]],[[28]],[[29]],[[30]],[[31]],[[32]],[[33]],[[34]],[[35]],[[36]],[[37]],[[38]],[[39]],[[40]],[[41]],[[42]],[[43]],[[44]],[[45]],[[46]],[[47]],[[48]],[[49]],[[50]],[[51]],[[52]],[[53]],[[54]],[[55]],[[56]],[[57]],[[58]],[[59]],[[60]],[[61]],[[62]],[[63]],[[64]],[[65]],[[66]],[[67]],[[68]],[[69]],[[70]],[[71]],[[72]],[[73]],[[74]],[[75]],[[76]],[[77]],[[78]],[[79]],[[80]],[[81]],[[82]],[[83]],[[84]],[[85]],[[86]],[[87]],[[88]],[[89]],[[90]],[[91]],[[92]],[[93]],[[94]],[[95]]]}\"\n\n\n"
							}
						},
						{
							"id": "set-size",
							"objectClass": "ValidStackMoves",
							"sid": 994871182161300,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"id": "set-size",
							"objectClass": "ValidFoundationMoves",
							"sid": 131074659618486,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"id": "set-size",
							"objectClass": "StockArray",
							"sid": 730789791173692,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"id": "set-size",
							"objectClass": "StockArray",
							"sid": 182559090336249,
							"parameters": {
								"width": "96",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 513557223547442
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 878326283129414,
							"parameters": {
								"seconds": "0.3"
							}
						},
						{
							"callFunction": "Deal",
							"sid": 844762285441341
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 845520889848612
						},
						{
							"callFunction": "DealToStacks",
							"sid": 263263905693985
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 428444139164847
						}
					],
					"sid": 233210411736109
				}
			],
			"sid": 692053901932316
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 437302197813009,
					"parameters": {
						"object": "Card"
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 173330207989862,
					"parameters": {
						"variable": "IsInMenu"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"callFunction": "SetDraggable",
					"sid": 450789499536485
				}
			],
			"sid": 292705198669873,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 545164561338043,
							"parameters": {
								"object": "Stack"
							}
						},
						{
							"id": "pick-topbottom",
							"objectClass": "Card",
							"sid": 236403444287546,
							"parameters": {
								"which": "top"
							}
						}
					],
					"actions": [
						{
							"callFunction": "GetValidFoundationMoves",
							"sid": 353614801236446,
							"parameters": [
								"Card.Suit",
								"Card.Value"
							]
						},
						{
							"callFunction": "GetValidStackMoves",
							"sid": 549714222468911,
							"parameters": [
								"Card.Suit",
								"Card.Value"
							]
						},
						{
							"callFunction": "TryToMoveTappedCard",
							"sid": 227197157502965,
							"parameters": [
								"Card.UID"
							]
						}
					],
					"sid": 684033536055187
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 327044585357161,
							"parameters": {
								"object": "Discard"
							}
						},
						{
							"id": "pick-topbottom",
							"objectClass": "Card",
							"sid": 755343208445559,
							"parameters": {
								"which": "top"
							}
						}
					],
					"actions": [
						{
							"callFunction": "GetValidFoundationMoves",
							"sid": 480248970795029,
							"parameters": [
								"Card.Suit",
								"Card.Value"
							]
						},
						{
							"callFunction": "GetValidStackMoves",
							"sid": 962101286523485,
							"parameters": [
								"Card.Suit",
								"Card.Value"
							]
						},
						{
							"callFunction": "TryToMoveTappedCard",
							"sid": 324211139357175,
							"parameters": [
								"Card.UID"
							]
						}
					],
					"sid": 155451886623451
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-drag-start",
					"objectClass": "Card",
					"sid": 505684448781096,
					"behaviorType": "DragDrop"
				}
			],
			"actions": [
				{
					"callFunction": "GetValidFoundationMoves",
					"sid": 488272412527277,
					"parameters": [
						"Card.Suit",
						"Card.Value"
					]
				},
				{
					"callFunction": "GetValidStackMoves",
					"sid": 527894745374607,
					"parameters": [
						"Card.Suit",
						"Card.Value"
					]
				},
				{
					"id": "move-to-top",
					"objectClass": "Card",
					"sid": 525147540174330
				},
				{
					"callFunction": "DisableDND",
					"sid": 234944909894608,
					"parameters": [
						"Card.UID"
					]
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 601572699762563,
					"parameters": {
						"variable": "DraggedFromType",
						"value": "\"\""
					}
				}
			],
			"sid": 672236294069689,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 916540030868614,
							"parameters": {
								"object": "Stack"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 239163115538316,
							"parameters": {
								"variable": "DraggedFromType",
								"value": "\"Stack\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 540761106997958,
							"parameters": {
								"variable": "DraggedFromUID",
								"value": "Stack.UID"
							}
						}
					],
					"sid": 851673243571835
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 408354277512931,
							"parameters": {
								"object": "Discard"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 449519279295858,
							"parameters": {
								"variable": "DraggedFromType",
								"value": "\"Discard\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 463345552387541,
							"parameters": {
								"variable": "DraggedFromUID",
								"value": "Discard.UID"
							}
						}
					],
					"sid": 749713715386128
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-drop",
					"objectClass": "Card",
					"sid": 378056036698460,
					"behaviorType": "DragDrop"
				}
			],
			"actions": [],
			"sid": 102962258150787,
			"children": [
				{
					"eventType": "comment",
					"text": "card moves to foundation"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 892246108241762,
							"parameters": {
								"first-value": "Functions.GetIsDropPositionValid(Card.UID)",
								"comparison": 0,
								"second-value": "\"true\""
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 986017395350527,
							"parameters": {
								"object": "Foundation"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Card",
							"sid": 626578792033135,
							"parameters": {
								"x": "Foundation.X",
								"y": "Foundation.Y"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Card",
							"sid": 858819415168565,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Foundation",
							"sid": 470270722610409,
							"parameters": {
								"instance-variable": "TopCardValue",
								"value": "Card.Value"
							}
						},
						{
							"callFunction": "SetDraggable",
							"sid": 271889263613070
						}
					],
					"sid": 702257930396618
				},
				{
					"eventType": "comment",
					"text": "card moves to stack"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 727107349511489
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 389060575501347,
							"parameters": {
								"first-value": "Functions.GetIsDropPositionValid(Card.UID)",
								"comparison": 0,
								"second-value": "\"true\""
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 679405669688107,
							"parameters": {
								"object": "Stack"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Card",
							"sid": 924371546479893,
							"parameters": {
								"x": "Stack.X",
								"y": "Stack.Y"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Card",
							"sid": 386926045179030,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Stack",
							"sid": 433959213620267,
							"parameters": {
								"instance-variable": "TopCardValue",
								"value": "Card.Value"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Stack",
							"sid": 433210215624182,
							"parameters": {
								"instance-variable": "IsEmpty",
								"value": "false"
							}
						},
						{
							"callFunction": "SetDraggable",
							"sid": 430996380902287
						}
					],
					"sid": 762583239811858
				},
				{
					"eventType": "comment",
					"text": "card position resets"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 803642166392496
						}
					],
					"actions": [],
					"sid": 330847822662093,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 409090934350632,
									"parameters": {
										"variable": "DraggedFromType",
										"comparison": 0,
										"value": "\"Stack\""
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "Stack",
									"sid": 333239022604080,
									"parameters": {
										"unique-id": "DraggedFromUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "Card",
									"sid": 242846256263251,
									"parameters": {
										"x": "Stack.X",
										"y": "Stack.Y"
									}
								},
								{
									"callFunction": "SetDraggable",
									"sid": 203420700419778
								}
							],
							"sid": 612785415549893
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 668275055649540
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 135990079630124,
									"parameters": {
										"variable": "DraggedFromType",
										"comparison": 0,
										"value": "\"Discard\""
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "Card",
									"sid": 777080618085072,
									"parameters": {
										"x": "Discard.X",
										"y": "Discard.Y"
									}
								},
								{
									"callFunction": "SetDraggable",
									"sid": 122890477398720
								}
							],
							"sid": 262427066221072
						}
					]
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 288880627437992,
					"parameters": {
						"object": "StackIndicator"
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 529404634081788,
					"parameters": {
						"variable": "IsInMenu"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"callFunction": "FlipCard",
					"sid": 991780902440435
				}
			],
			"sid": 269973160063968
		}
	],
	"sid": 723594591968900
}