{
	"name": "ePrepForCombat",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 122742507968870
				}
			],
			"actions": [
				{
					"id": "wait-for-signal",
					"objectClass": "System",
					"sid": 288150915925350,
					"parameters": {
						"tag": "\"abilitiesLoaded\""
					}
				},
				{
					"id": "wait-for-signal",
					"objectClass": "System",
					"sid": 980194606100505,
					"parameters": {
						"tag": "\"enemiesLoaded\""
					}
				},
				{
					"callFunction": "PrepAbilitySlots",
					"sid": 507179409345422
				},
				{
					"callFunction": "PrepEnemy",
					"sid": 843539795451381
				},
				{
					"callFunction": "PrepPlayer",
					"sid": 882758867449405
				}
			],
			"sid": 186040442247670
		},
		{
			"functionName": "PrepAbilitySlots",
			"functionDescription": "",
			"functionCategory": "PrepForCombat",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 603370042536293,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 517174235535632,
							"parameters": {
								"instance-variable": "Ability1",
								"comparison": 1,
								"value": "\"\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "AbilityButton",
							"sid": 654827188951915,
							"parameters": {
								"instance-variable": "Slot",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "AbilityButton",
							"sid": 987607683100259,
							"parameters": {
								"animation": "\"Full\"",
								"from": "beginning"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 265383534985866,
							"parameters": {
								"object-to-create": "Ability",
								"layer": "\"Background\"",
								"x": "AbilityButton.X",
								"y": "AbilityButton.Y",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "Ability",
							"sid": 954269481800391,
							"parameters": {
								"frame-number": "JSON.Get(\"abilities.\" & Player.Ability1 & \".animationFrame\")"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 434790254679194,
							"parameters": {
								"type": "log",
								"message": "Player.Ability1"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Ability",
							"sid": 700659480497238,
							"parameters": {
								"instance-variable": "DamageRoll",
								"value": "JSON.Get(\"abilities.\" & Player.Ability1 & \".damageRoll\")"
							}
						}
					],
					"sid": 909377016473386
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 971296550168692,
							"parameters": {
								"instance-variable": "Ability2",
								"comparison": 1,
								"value": "\"\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "AbilityButton",
							"sid": 755508340033214,
							"parameters": {
								"instance-variable": "Slot",
								"comparison": 0,
								"value": "2"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "AbilityButton",
							"sid": 736785554828811,
							"parameters": {
								"animation": "\"Full\"",
								"from": "beginning"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 911052820687657,
							"parameters": {
								"object-to-create": "Ability",
								"layer": "\"Background\"",
								"x": "AbilityButton.X",
								"y": "AbilityButton.Y",
								"create-hierarchy": false
							}
						}
					],
					"sid": 288244801969988
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 974756722017237,
							"parameters": {
								"instance-variable": "Ability3",
								"comparison": 1,
								"value": "\"\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "AbilityButton",
							"sid": 252832786136037,
							"parameters": {
								"instance-variable": "Slot",
								"comparison": 0,
								"value": "3"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "AbilityButton",
							"sid": 206569419425101,
							"parameters": {
								"animation": "\"Full\"",
								"from": "beginning"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 304309809277002,
							"parameters": {
								"object-to-create": "Ability",
								"layer": "\"Background\"",
								"x": "AbilityButton.X",
								"y": "AbilityButton.Y",
								"create-hierarchy": false
							}
						}
					],
					"sid": 664597542143182
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 639508814968694,
							"parameters": {
								"instance-variable": "Ability4",
								"comparison": 1,
								"value": "\"\""
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "AbilityButton",
							"sid": 544389469894707,
							"parameters": {
								"instance-variable": "Slot",
								"comparison": 0,
								"value": "4"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "AbilityButton",
							"sid": 191956780900318,
							"parameters": {
								"animation": "\"Full\"",
								"from": "beginning"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 151119079669447,
							"parameters": {
								"object-to-create": "Ability",
								"layer": "\"Background\"",
								"x": "AbilityButton.X",
								"y": "AbilityButton.Y",
								"create-hierarchy": false
							}
						}
					],
					"sid": 140774320756721
				}
			]
		},
		{
			"functionName": "PrepEnemy",
			"functionDescription": "",
			"functionCategory": "PrepForCombat",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "TODO: enemy maxHP should actually be determined when spawning on the world map (if flee gets implemented)"
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Enemy",
					"sid": 785106727606797,
					"parameters": {
						"instance-variable": "MaxHP",
						"value": "Functions.ParseDice(Enemy.RollForMaxHP)"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Enemy",
					"sid": 446725120103314,
					"parameters": {
						"instance-variable": "CurrentHP",
						"value": "Enemy.MaxHP"
					}
				},
				{
					"callFunction": "SetEnemyHPText",
					"sid": 673044561866638
				}
			],
			"sid": 843400195196978
		},
		{
			"functionName": "PrepPlayer",
			"functionDescription": "",
			"functionCategory": "PrepForCombat",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 927157600896400,
					"parameters": {
						"instance-variable": "MaxHP",
						"value": "PlayerMaxHP"
					}
				},
				{
					"id": "set-instvar-value",
					"objectClass": "Player",
					"sid": 752415030927227,
					"parameters": {
						"instance-variable": "CurrentHP",
						"value": "Player.MaxHP"
					}
				},
				{
					"callFunction": "SetPlayerHPText",
					"sid": 233937506468058
				}
			],
			"sid": 438226974376687
		}
	],
	"sid": 590417324907145
}