{
	"name": "Event sheet 1",
	"events": [
		{
			"eventType": "variable",
			"name": "CARD_OFFSET",
			"type": "number",
			"initialValue": "22",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 329072779374405
		},
		{
			"eventType": "variable",
			"name": "LEFT_STACK_POSITION",
			"type": "number",
			"initialValue": "286",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 544639373458848
		},
		{
			"eventType": "variable",
			"name": "NUMBER_OF_STACK_COLUMNS",
			"type": "number",
			"initialValue": "5",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 339777008600582
		},
		{
			"eventType": "variable",
			"name": "ROWS_DEALT",
			"type": "number",
			"initialValue": "6",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 454318427101501
		},
		{
			"eventType": "variable",
			"name": "USE_DEMO_DEAL",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 505002575653890
		},
		{
			"eventType": "variable",
			"name": "CardPickedUpFromStack",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 702963747059978
		},
		{
			"eventType": "variable",
			"name": "Filter",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 760882728267935
		},
		{
			"eventType": "variable",
			"name": "IsAbleToFilter",
			"type": "boolean",
			"initialValue": "true",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 635910957481965
		},
		{
			"eventType": "variable",
			"name": "NumberOfCardsBeingMoved",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 610838901307219
		},
		{
			"eventType": "variable",
			"name": "CurrentScroll",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 358761298496694
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Mechanics",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 522352220510117
						}
					],
					"actions": [
						{
							"id": "set-animation-frame",
							"objectClass": "Flips",
							"sid": 519010585130049,
							"parameters": {
								"frame-number": "6"
							}
						}
					],
					"sid": 936041975530402
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "Card",
							"sid": 973521494471229,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "DragBase",
							"sid": 332301058534545,
							"parameters": {
								"x": "Card.X",
								"y": "Card.Y"
							}
						}
					],
					"sid": 976697547806193
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "Card",
							"sid": 569868919266985,
							"behaviorType": "DragDrop"
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 916862468157506,
							"parameters": {
								"object": "Stack"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "DragBase",
							"sid": 327533952969569,
							"parameters": {
								"x": "Card.X",
								"y": "Card.Y"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 349444973137998,
							"parameters": {
								"variable": "CardPickedUpFromStack",
								"value": "Stack.UID"
							}
						},
						{
							"id": "move-to-top",
							"objectClass": "Card",
							"sid": 373299609659085
						},
						{
							"callFunction": "CalculatePossibleMoves",
							"sid": 581776234301900,
							"parameters": [
								"Card.Value"
							]
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 379229250147510
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 121384205666469,
							"parameters": {
								"variable": "NumberOfCardsBeingMoved",
								"value": "1"
							}
						},
						{
							"callFunction": "PinSouthCard",
							"sid": 514218735398194,
							"parameters": [
								"Stack.UID",
								"Card.IndexInStack + 1"
							]
						}
					],
					"sid": 238516553340325
				},
				{
					"functionName": "PinSouthCard",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "StackUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 855709147047922
						},
						{
							"name": "IndexOfSouthCardInStack",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 564056219249411
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stack",
							"sid": 156062220608367,
							"parameters": {
								"unique-id": "StackUID"
							}
						}
					],
					"actions": [],
					"sid": 473017089553635,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 312030155475023,
									"parameters": {
										"instance-variable": "IndexInStack",
										"comparison": 0,
										"value": "IndexOfSouthCardInStack"
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 936407683320161,
									"parameters": {
										"object": "Stack"
									}
								}
							],
							"actions": [
								{
									"id": "pin-to-object",
									"objectClass": "Card",
									"sid": 793841340772327,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "DragBase",
										"mode": "position-only"
									}
								},
								{
									"id": "move-to-top",
									"objectClass": "Card",
									"sid": 602344987597059
								},
								{
									"callFunction": "PinSouthCard",
									"sid": 763687746032883,
									"parameters": [
										"StackUID",
										"IndexOfSouthCardInStack + 1"
									]
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 187376380984894,
									"parameters": {
										"variable": "NumberOfCardsBeingMoved",
										"value": "1"
									}
								}
							],
							"sid": 632697227718106
						}
					]
				},
				{
					"functionName": "UnpinCard",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "unpin",
							"objectClass": "Card",
							"sid": 140828510324933,
							"behaviorType": "Pin"
						}
					],
					"sid": 916968011802155
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "Card",
							"sid": 310036571008800,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [],
					"sid": 818405412985927,
					"children": [
						{
							"eventType": "comment",
							"text": "card was dropped on a stack: check to see if it's a valid move"
						},
						{
							"eventType": "comment",
							"text": "TODO: might not need CardPickedUpFromStack anymore"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 750985861154742,
									"parameters": {
										"object": "Stack"
									}
								},
								{
									"id": "contains-value",
									"objectClass": "PossibleMoves",
									"sid": 679715428527692,
									"parameters": {
										"value": "Stack.UID"
									}
								}
							],
							"actions": [
								{
									"callFunction": "UnpinCard",
									"sid": 807822921045872
								},
								{
									"callFunction": "MoveCardToStack",
									"sid": 701100182144847,
									"parameters": [
										"Card.Suit",
										"Card.Value",
										"Stack.UID"
									]
								},
								{
									"callFunction": "IsCardNorthInSequence",
									"sid": 834245906641376,
									"disabled": true,
									"parameters": [
										"Card.Suit",
										"Card.Value",
										"Stack.UID",
										"Card.IndexInStack"
									]
								},
								{
									"callFunction": "PlayCardPlace",
									"sid": 806724490445907
								},
								{
									"callFunction": "DetermineWhichCardsAreMoveable",
									"sid": 675517604286963
								}
							],
							"sid": 613471760528414
						},
						{
							"eventType": "comment",
							"text": "card was dropped on a foundation: check to see if it's a valid move"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 554163063720261
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 459555157207528,
									"parameters": {
										"object": "Foundation"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Foundation",
									"sid": 424777415618003,
									"parameters": {
										"instance-variable": "Suit",
										"comparison": 0,
										"value": "Card.Suit"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Foundation",
									"sid": 297553103972790,
									"parameters": {
										"instance-variable": "TopCardValue",
										"comparison": 0,
										"value": "Card.Value - 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "Card",
									"sid": 100697228950733,
									"parameters": {
										"x": "Foundation.X",
										"y": "Foundation.Y"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 831022173789777,
									"parameters": {
										"instance-variable": "IndexInStack",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 473505140252762,
									"parameters": {
										"instance-variable": "StackUID",
										"value": "0"
									}
								},
								{
									"id": "add-to-instvar",
									"objectClass": "Foundation",
									"sid": 270624180092187,
									"parameters": {
										"instance-variable": "TopCardValue",
										"value": "1"
									}
								},
								{
									"callFunction": "PopCardFromStack",
									"sid": 906036310838753,
									"parameters": [
										"CardPickedUpFromStack"
									]
								},
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 531161320015955,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"callFunction": "PlayCardPlace",
									"sid": 308233097703888
								},
								{
									"callFunction": "UnpinCard",
									"sid": 345802707947377
								},
								{
									"callFunction": "RepositionStacks",
									"sid": 628726376611688
								},
								{
									"callFunction": "DetermineWhichCardsAreMoveable",
									"sid": 701449390500239
								}
							],
							"sid": 840776423562527
						},
						{
							"eventType": "comment",
							"text": "move wasn't valid: return card to where it came from"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 785618203649029
								},
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 358741173800482,
									"parameters": {
										"object": "Stack",
										"expression": "Stack.UID = CardPickedUpFromStack"
									}
								}
							],
							"actions": [
								{
									"callFunction": "UnpinCard",
									"sid": 391685483786778
								},
								{
									"callFunction": "ReturnCardToInitialPosition",
									"sid": 686589380759102,
									"parameters": [
										"Card.Suit",
										"Card.Value"
									]
								}
							],
							"sid": 481268333933285
						}
					]
				},
				{
					"functionName": "MoveCardToStack",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "SuitOfCard",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 405779340048255
						},
						{
							"name": "ValueOfCard",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 727061007064131
						},
						{
							"name": "UIDOfNewStack",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 865567724739528
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stack",
							"sid": 189214719939303,
							"parameters": {
								"unique-id": "UIDOfNewStack"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 285595164168374,
							"parameters": {
								"instance-variable": "Suit",
								"comparison": 0,
								"value": "SuitOfCard"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 466886102202994,
							"parameters": {
								"instance-variable": "Value",
								"comparison": 0,
								"value": "ValueOfCard"
							}
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Card",
							"sid": 322550518309442,
							"parameters": {
								"x": "Stack.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 647320868780101,
							"parameters": {
								"instance-variable": "IndexInStack",
								"value": "Stack.NumberOfCards"
							}
						},
						{
							"id": "set-y",
							"objectClass": "Card",
							"sid": 356045245842423,
							"parameters": {
								"y": "Stack.Y + (Stack.NumberOfCards * CARD_OFFSET)"
							}
						},
						{
							"id": "add-to-instvar",
							"objectClass": "Stack",
							"sid": 530792620652088,
							"parameters": {
								"instance-variable": "NumberOfCards",
								"value": "1"
							}
						},
						{
							"callFunction": "PopCardFromStack",
							"sid": 909553382622166,
							"parameters": [
								"Card.StackUID"
							]
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 202127957658818,
							"parameters": {
								"instance-variable": "StackUID",
								"value": "Stack.UID"
							}
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 478508961413997,
							"parameters": {
								"variable": "NumberOfCardsBeingMoved",
								"value": "1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 840982373386943,
							"parameters": {
								"variable": "BottomOfNorthStack",
								"value": "Stack.Y + Stack.Height"
							}
						},
						{
							"id": "set-height",
							"objectClass": "Stack",
							"sid": 982773392175130,
							"parameters": {
								"height": "Card.Height + (CARD_OFFSET * (Stack.NumberOfCards - 1))"
							}
						},
						{
							"callFunction": "RepositionStacks",
							"sid": 273734637562348
						},
						{
							"callFunction": "DetermineWhichCardsAreMoveable",
							"sid": 996939113108046
						}
					],
					"sid": 472941558674143,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 935643490438363,
									"parameters": {
										"variable": "NumberOfCardsBeingMoved",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveCardToStack",
									"sid": 957362076436564,
									"parameters": [
										"SuitOfCard",
										"ValueOfCard - 1",
										"UIDOfNewStack"
									]
								}
							],
							"sid": 232982280830368
						}
					]
				},
				{
					"functionName": "ReturnCardToInitialPosition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "SuitOfCard",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 213026586485175
						},
						{
							"name": "ValueOfCard",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 466845550943172
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 738226996706502,
							"parameters": {
								"instance-variable": "Suit",
								"comparison": 0,
								"value": "SuitOfCard"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 820223617723472,
							"parameters": {
								"instance-variable": "Value",
								"comparison": 0,
								"value": "ValueOfCard"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stack",
							"sid": 923195982738876,
							"parameters": {
								"unique-id": "Card.StackUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Card",
							"sid": 178642961379922,
							"parameters": {
								"x": "Stack.X"
							}
						},
						{
							"id": "set-y",
							"objectClass": "Card",
							"sid": 480592758439329,
							"parameters": {
								"y": "Stack.Y + (Card.IndexInStack * CARD_OFFSET)"
							}
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 771959667088586,
							"parameters": {
								"variable": "NumberOfCardsBeingMoved",
								"value": "1"
							}
						}
					],
					"sid": 288758257189406,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 346547318844828,
									"parameters": {
										"variable": "NumberOfCardsBeingMoved",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ReturnCardToInitialPosition",
									"sid": 238389761132145,
									"parameters": [
										"SuitOfCard",
										"ValueOfCard - 1"
									]
								}
							],
							"sid": 129759426176098
						}
					]
				},
				{
					"functionName": "IsCardNorthInSequence",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "SuitOfSouthCard",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 868454289400619
						},
						{
							"name": "ValueOfSouthCard",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 313696811774280
						},
						{
							"name": "StackUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 831227901669216
						},
						{
							"name": "IndexOfSouthCardInStack",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 531668745373784
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stack",
							"sid": 398317216182502,
							"parameters": {
								"unique-id": "StackUID"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 137151998967781,
							"parameters": {
								"object": "Stack"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 667106839783327,
							"parameters": {
								"instance-variable": "IndexInStack",
								"comparison": 0,
								"value": "IndexOfSouthCardInStack - 1"
							}
						}
					],
					"actions": [],
					"sid": 673488984933115,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Card",
									"sid": 780851374277897,
									"parameters": {
										"animation": "\"Front\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 784660556707162,
									"parameters": {
										"instance-variable": "Suit",
										"comparison": 0,
										"value": "SuitOfSouthCard"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 738143609828231,
									"parameters": {
										"instance-variable": "Value",
										"comparison": 0,
										"value": "ValueOfSouthCard + 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 211135192996214,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "enabled"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 918640615191170,
									"parameters": {
										"type": "log",
										"message": "\"in sequence\""
									}
								},
								{
									"callFunction": "IsCardNorthInSequence",
									"sid": 987264888948872,
									"parameters": [
										"Card.Suit",
										"Card.Value",
										"Stack.UID",
										"Card.IndexInStack"
									]
								}
							],
							"sid": 160735265218507
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 390737110515315
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 560970307611988,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 273609497010071,
									"parameters": {
										"type": "log",
										"message": "\"not in sequence\""
									}
								}
							],
							"sid": 963675242660731
						}
					]
				},
				{
					"functionName": "IsCardSouthInSequence",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "string",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "SuitOfNorthCard",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 922271844083470
						},
						{
							"name": "ValueOfNorthCard",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 174094552473968
						},
						{
							"name": "StackUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 687228945574413
						},
						{
							"name": "IndexOfNorthCardInStack",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 682681716707409
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Stack",
							"sid": 347409060167441,
							"parameters": {
								"unique-id": "StackUID"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 550578946127238,
							"parameters": {
								"object": "Stack"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 328881382856542,
							"parameters": {
								"instance-variable": "IndexInStack",
								"comparison": 0,
								"value": "IndexOfNorthCardInStack + 1"
							}
						}
					],
					"actions": [],
					"sid": 268580460184963,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Card",
									"sid": 599828872816586,
									"parameters": {
										"animation": "\"Front\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 461382414839971,
									"parameters": {
										"instance-variable": "Suit",
										"comparison": 0,
										"value": "SuitOfNorthCard"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 661086061677122,
									"parameters": {
										"instance-variable": "Value",
										"comparison": 0,
										"value": "ValueOfNorthCard - 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 195795382517093,
									"parameters": {
										"value": "\"true\""
									}
								}
							],
							"sid": 892637453815418
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 543530209831825
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 381602897911458,
									"parameters": {
										"value": "\"false\""
									}
								}
							],
							"sid": 989882464785139
						}
					]
				},
				{
					"functionName": "DetermineWhichCardsAreMoveable",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "for-each-ordered",
							"objectClass": "System",
							"sid": 829949964948051,
							"parameters": {
								"object": "Card",
								"expression": "Card.IndexInStack",
								"order": "ascending"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Stack",
							"sid": 310719024916132,
							"parameters": {
								"object": "Card"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Card",
							"sid": 233807428725530,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"callFunction": "CheckForWinCondition",
							"sid": 391495098007895,
							"disabled": true
						}
					],
					"sid": 955893541682568,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Card",
									"sid": 632970085813731,
									"parameters": {
										"animation": "\"Back\""
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 831296706873666,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								}
							],
							"sid": 198509714351886
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 670018143399907
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 953100137028799,
									"parameters": {
										"instance-variable": "Suit",
										"comparison": 0,
										"value": "Filter"
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 256213038565301,
									"parameters": {
										"object": "Stack"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Card",
									"sid": 306518628701748,
									"parameters": {
										"opacity": "50"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 986060825290918,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								}
							],
							"sid": 343055852302341
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 291135198003287
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 444962870247982,
									"parameters": {
										"first-value": "Functions.IsCardSouthInSequence(Card.Suit, Card.Value, Stack.UID, Card.IndexInStack)",
										"comparison": 0,
										"second-value": "\"true\""
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 831343722758201,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "enabled"
									}
								}
							],
							"sid": 306812445094225,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 584193010398943
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 318085153633220,
									"parameters": {
										"instance-variable": "IndexInStack",
										"comparison": 0,
										"value": "Stack.NumberOfCards - 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 966394444061260,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "enabled"
									}
								},
								{
									"callFunction": "IsCardNorthInSequence",
									"sid": 584810157078116,
									"parameters": [
										"Card.Suit",
										"Card.Value",
										"Stack.UID",
										"Card.IndexInStack"
									]
								}
							],
							"sid": 984850309709029
						}
					]
				},
				{
					"eventType": "variable",
					"name": "NumberOfCardsOnFoundations",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 607227323074512
				},
				{
					"functionName": "CheckForWinCondition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 947979996272552,
							"parameters": {
								"variable": "NumberOfCardsOnFoundations",
								"value": "0"
							}
						}
					],
					"sid": 666853415339673,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 438748788653223,
									"parameters": {
										"object": "Foundation"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 113399197777897,
									"parameters": {
										"variable": "NumberOfCardsOnFoundations",
										"value": "Foundation.TopCardValue"
									}
								},
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 605450158930015,
									"parameters": {
										"type": "log",
										"message": "NumberOfCardsOnFoundations"
									}
								}
							],
							"sid": 274423310955501,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 696180405862668,
											"parameters": {
												"first-value": "NumberOfCardsOnFoundations",
												"comparison": 0,
												"second-value": "65"
											}
										}
									],
									"actions": [
										{
											"id": "restart-layout",
											"objectClass": "System",
											"sid": 271481423442212
										}
									],
									"sid": 516342013220615
								}
							]
						}
					]
				}
			],
			"sid": 579519412431749
		},
		{
			"functionName": "FlipCard",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "CardID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 863267387805541
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 799165143151254,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Card",
							"sid": 953452557605111,
							"parameters": {
								"instance-variable": "CardID",
								"comparison": 0,
								"value": "CardID"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Card",
							"sid": 597157106876273,
							"parameters": {
								"animation": "\"Front\"",
								"from": "current-frame"
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "Card",
							"sid": 433123866364642
						},
						{
							"id": "set-animation-frame",
							"objectClass": "Card",
							"sid": 617560982978078,
							"parameters": {
								"frame-number": "Card.CardID"
							}
						},
						{
							"type": "comment",
							"text": "Grab the card's suit & value from the arrays"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 702752301481905,
							"parameters": {
								"instance-variable": "Value",
								"value": "DeckValues.At(CardID)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Card",
							"sid": 209046058755123,
							"parameters": {
								"instance-variable": "Suit",
								"value": "DeckSuits.At(CardID)"
							}
						},
						{
							"callFunction": "PlayCardFlip",
							"sid": 756260149390096
						}
					],
					"sid": 785457656922499,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 110289422126140,
									"parameters": {
										"instance-variable": "Suit",
										"comparison": 0,
										"value": "Filter"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 836950200822363,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "Card",
									"sid": 287521433573155,
									"parameters": {
										"opacity": "50"
									}
								}
							],
							"sid": 834258857320968
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 666693275147232
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 160190950087788,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "enabled"
									}
								}
							],
							"sid": 161841204553708
						}
					]
				}
			]
		},
		{
			"functionName": "PopCardFromStack",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "StackID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 987307033634866
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "Stack",
					"sid": 592586640582798,
					"parameters": {
						"unique-id": "StackID"
					}
				}
			],
			"actions": [
				{
					"id": "subtract-from-instvar",
					"objectClass": "Stack",
					"sid": 633821927539192,
					"parameters": {
						"instance-variable": "NumberOfCards",
						"value": "1"
					}
				},
				{
					"id": "set-height",
					"objectClass": "Stack",
					"sid": 303188626682524,
					"parameters": {
						"height": "Card.Height + ((Stack.NumberOfCards - 1) * CARD_OFFSET)"
					}
				}
			],
			"sid": 720462996218419,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Card",
							"sid": 551149703651316,
							"parameters": {
								"object": "Stack"
							}
						},
						{
							"id": "pick-topbottom",
							"objectClass": "Card",
							"sid": 720845548254508,
							"parameters": {
								"which": "top"
							}
						}
					],
					"actions": [
						{
							"callFunction": "FlipCard",
							"sid": 576343312376952,
							"parameters": [
								"Card.CardID"
							]
						}
					],
					"sid": 622618173375355
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tap-object",
					"objectClass": "Touch",
					"sid": 646729303089413,
					"parameters": {
						"object": "Flips"
					}
				}
			],
			"actions": [
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 698878071441917,
					"parameters": {
						"variable": "IsAbleToFilter",
						"value": "true"
					}
				},
				{
					"id": "set-text",
					"objectClass": "HelperText",
					"sid": 404511284659283,
					"parameters": {
						"text": "\"Don't forget, \"&Newline&\"you can enter color filter mode ⇧ \"&Newline&\"before dealing more cards! ⇩\""
					}
				}
			],
			"sid": 818060882823510,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 895616187077676,
							"parameters": {
								"variable": "Filter",
								"comparison": 1,
								"value": "\"\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Must exit color filter mode before dealing, so there will only be five stacks"
						},
						{
							"callFunction": "ExitFilterMode",
							"sid": 987149470711174
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 860077624647963
						}
					],
					"sid": 742107552452083
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 391920115377942,
							"parameters": {
								"object": "SuitSelector"
							}
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "SuitSelector",
							"sid": 718908146003917,
							"parameters": {
								"opacity": "100"
							}
						}
					],
					"sid": 902829574710931
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each-ordered",
							"objectClass": "System",
							"sid": 645546153832966,
							"parameters": {
								"object": "Stack",
								"expression": "Stack.X",
								"order": "ascending"
							}
						}
					],
					"actions": [
						{
							"callFunction": "DealNextCardToStack",
							"sid": 138344173810505,
							"parameters": [
								"Stack.UID",
								true
							]
						}
					],
					"sid": 620890009330113
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "DetermineWhichCardsAreMoveable",
							"sid": 402428945737136
						},
						{
							"id": "set-animation-frame",
							"objectClass": "Flips",
							"sid": 442347971623651,
							"parameters": {
								"frame-number": "Flips.AnimationFrame - 1"
							}
						},
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 296054271633181,
							"parameters": {
								"audio-file": "cardFan1",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 846419992444238,
							"parameters": {
								"seconds": "0.3"
							}
						}
					],
					"sid": 902993291994050
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-empty",
					"objectClass": "Stock",
					"sid": 171014879288904
				}
			],
			"actions": [
				{
					"id": "destroy",
					"objectClass": "Flips",
					"sid": 611295655661598
				}
			],
			"sid": 392901990049886
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Deal initial hand",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 166718424536391
						}
					],
					"actions": [
						{
							"id": "load",
							"objectClass": "DeckValues",
							"sid": 712028494236147,
							"parameters": {
								"json": "\"{\"\"c2array\"\":true,\"\"size\"\":[65,1,1],\"\"data\"\":[[[1]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[1]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[1]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[1]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]],[[1]],[[2]],[[3]],[[4]],[[5]],[[6]],[[7]],[[8]],[[9]],[[10]],[[11]],[[12]],[[13]]]}\""
							}
						},
						{
							"id": "load",
							"objectClass": "DeckSuits",
							"sid": 386504627121978,
							"parameters": {
								"json": "\"{\"\"c2array\"\":true,\"\"size\"\":[65,1,1],\"\"data\"\":[[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Circle\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Heart\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Triangle\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Diamond\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]],[[\"\"Pentagon\"\"]]]}\""
							}
						},
						{
							"id": "load",
							"objectClass": "DemoDeal",
							"sid": 686341590262025,
							"parameters": {
								"json": "\"{\"\"c2array\"\":true,\"\"size\"\":[65,1,1],\"\"data\"\":[[[13]],[[56]],[[23]],[[38]],[[57]],[[1]],[[21]],[[9]],[[61]],[[53]],[[27]],[[22]],[[30]],[[47]],[[11]],[[24]],[[32]],[[0]],[[51]],[[6]],[[37]],[[63]],[[25]],[[49]],[[10]],[[15]],[[64]],[[59]],[[46]],[[42]],[[41]],[[62]],[[43]],[[60]],[[54]],[[55]],[[8]],[[39]],[[18]],[[5]],[[26]],[[40]],[[4]],[[34]],[[16]],[[58]],[[33]],[[14]],[[29]],[[44]],[[45]],[[48]],[[2]],[[3]],[[28]],[[19]],[[50]],[[52]],[[20]],[[36]],[[7]],[[31]],[[12]],[[17]],[[35]]]}\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 575921318242116,
							"parameters": {
								"seconds": "0.3"
							}
						}
					],
					"sid": 101111473425115,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 284704915245734,
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 325048981251582,
									"parameters": {
										"variable": "USE_DEMO_DEAL"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 794492680233672,
							"children": [
								{
									"eventType": "variable",
									"name": "PickIndex",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 957178493269747
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-element",
											"objectClass": "Stock",
											"sid": 306105819238221,
											"parameters": {
												"axes": "x"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 807891496006269,
											"parameters": {
												"variable": "PickIndex",
												"value": "floor(random(DemoDeal.Width))"
											}
										},
										{
											"id": "set-at-x",
											"objectClass": "Stock",
											"sid": 666923038458553,
											"parameters": {
												"x": "Stock.CurX",
												"value": "DemoDeal.At(PickIndex)"
											}
										},
										{
											"id": "delete",
											"objectClass": "DemoDeal",
											"sid": 732602522011787,
											"parameters": {
												"index": "PickIndex",
												"axis": "x"
											}
										}
									],
									"sid": 722643483018409
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 341669204325789
								},
								{
									"id": "for-each-element",
									"objectClass": "Stock",
									"sid": 761762363978755,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"id": "set-at-x",
									"objectClass": "Stock",
									"sid": 408705661994456,
									"parameters": {
										"x": "Stock.CurX",
										"value": "DemoDeal.At(Stock.CurX)"
									}
								}
							],
							"sid": 345599107463905
						},
						{
							"eventType": "variable",
							"name": "RowBeingDealt",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 920593961765193
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 932379029912915,
									"parameters": {
										"count": "ROWS_DEALT"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 125369643203472,
									"parameters": {
										"variable": "RowBeingDealt",
										"value": "1"
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 564943211152952,
									"parameters": {
										"audio-file": "cardFan1",
										"loop": "not-looping",
										"volume": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 272387607041874,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 207712857115197,
											"parameters": {
												"object": "Stack",
												"expression": "Stack.Column",
												"order": "ascending"
											}
										}
									],
									"actions": [],
									"sid": 996856945388079,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 576509754006545,
													"parameters": {
														"variable": "RowBeingDealt",
														"comparison": 0,
														"value": "ROWS_DEALT"
													}
												}
											],
											"actions": [
												{
													"callFunction": "DealNextCardToStack",
													"sid": 591552704278184,
													"parameters": [
														"Stack.UID",
														true
													]
												}
											],
											"sid": 379670984247618
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 676551593190860
												}
											],
											"actions": [
												{
													"callFunction": "DealNextCardToStack",
													"sid": 905032925928794,
													"parameters": [
														"Stack.UID",
														false
													]
												}
											],
											"sid": 176936136168037
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "DealNextCardToStack",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "StackID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 745027188789768
						},
						{
							"name": "FaceUp",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 873441743863606
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 179939494494260,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Stack",
									"sid": 237129474782801,
									"parameters": {
										"unique-id": "StackID"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 913908065767331,
									"parameters": {
										"object-to-create": "Card",
										"layer": "\"Cards\"",
										"x": "Stack.X",
										"y": "Stack.Y + (Stack.NumberOfCards * CARD_OFFSET)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 107916912076576,
									"parameters": {
										"instance-variable": "CardID",
										"value": "Stock.At(0)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 339536872086514,
									"parameters": {
										"instance-variable": "IndexInStack",
										"value": "Stack.NumberOfCards"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 531988058449662,
									"parameters": {
										"instance-variable": "StackUID",
										"value": "Stack.UID"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 262684433475362,
									"parameters": {
										"instance-variable": "Suit",
										"value": "DeckSuits.At(Stock.At(0))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 565340074990593,
									"parameters": {
										"instance-variable": "Value",
										"value": "DeckValues.At(Stock.At(0))"
									}
								},
								{
									"id": "pop",
									"objectClass": "Stock",
									"sid": 267039339194029,
									"parameters": {
										"where": "front",
										"axis": "x"
									}
								},
								{
									"id": "set-height",
									"objectClass": "Stack",
									"sid": 110624789293096,
									"parameters": {
										"height": "Card.Height + (Stack.NumberOfCards * CARD_OFFSET)"
									}
								},
								{
									"id": "add-to-instvar",
									"objectClass": "Stack",
									"sid": 156385955441867,
									"parameters": {
										"instance-variable": "NumberOfCards",
										"value": "1"
									}
								}
							],
							"sid": 646916316968021,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 865071535846721,
											"parameters": {
												"variable": "FaceUp"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Card",
											"sid": 922160687407883,
											"parameters": {
												"animation": "\"Front\"",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "Card",
											"sid": 912826264695761,
											"parameters": {
												"frame-number": "Card.CardID"
											}
										}
									],
									"sid": 747334270742249
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 842636647850869
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Card",
											"sid": 283367407522762,
											"parameters": {
												"animation": "\"Back\"",
												"from": "beginning"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "Card",
											"sid": 275954320614615,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "disabled"
											}
										}
									],
									"sid": 805216391018971
								}
							]
						}
					]
				}
			],
			"sid": 372043074571073
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Calculate Possible Moves",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "for each stack, get the highest (z-level) card overlapping it"
				},
				{
					"eventType": "comment",
					"text": "figure out if it's a valid move"
				},
				{
					"eventType": "comment",
					"text": "if the card was dragged, set a boolean on the stack to say that it's a valid move"
				},
				{
					"eventType": "comment",
					"text": "reset the boolean on all stacks when the card is dropped"
				},
				{
					"eventType": "comment",
					"text": "if the card was clicked, move to the first valid move (check foundations first)"
				},
				{
					"functionName": "CalculatePossibleMoves",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": true,
					"functionParameters": [
						{
							"name": "Value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 570575231489746
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "PossibleMoves",
							"sid": 318753973589523,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						}
					],
					"sid": 461239220350649,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 901804924367307,
									"parameters": {
										"object": "Stack"
									}
								}
							],
							"actions": [],
							"sid": 865871549391247,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "Card",
											"sid": 362400192681497,
											"parameters": {
												"object": "Stack"
											}
										},
										{
											"id": "pick-topbottom",
											"objectClass": "Card",
											"sid": 197079407600803,
											"parameters": {
												"which": "top"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 296020998608087,
											"parameters": {
												"first-value": "Card.Value",
												"comparison": 0,
												"second-value": "Value + 1"
											}
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "PossibleMoves",
											"sid": 402898801831399,
											"parameters": {
												"where": "back",
												"value": "Stack.UID",
												"axis": "x"
											}
										}
									],
									"sid": 179493709517693
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 622727375978911
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Stack",
											"sid": 204438138366601,
											"parameters": {
												"instance-variable": "NumberOfCards",
												"comparison": 0,
												"value": "0"
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Stack",
											"sid": 582564204668801,
											"parameters": {
												"instance-variable": "Row",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "PossibleMoves",
											"sid": 938907408277181,
											"parameters": {
												"where": "back",
												"value": "Stack.UID",
												"axis": "x"
											}
										}
									],
									"sid": 453544631654461
								}
							]
						}
					]
				}
			],
			"sid": 714542388926580
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Color Filter Mode",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 181191340174781,
							"parameters": {
								"object": "SuitSelector"
							}
						}
					],
					"actions": [],
					"sid": 128998668425258,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 492601144396234,
									"parameters": {
										"variable": "IsAbleToFilter"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "SuitSelector",
									"sid": 882936103871572,
									"parameters": {
										"opacity": "50"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 263815037737670,
									"parameters": {
										"variable": "Filter",
										"value": "SuitSelector.Suit"
									}
								},
								{
									"callFunction": "EnterFilterMode",
									"sid": 157187275849344
								}
							],
							"sid": 868897110816266
						},
						{
							"eventType": "comment",
							"text": "Leave color filter mode"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 222320417401486
								}
							],
							"actions": [
								{
									"callFunction": "ExitFilterMode",
									"sid": 216475567260596
								}
							],
							"sid": 238000935953947
						}
					]
				},
				{
					"functionName": "EnterFilterMode",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 893452101394981,
							"parameters": {
								"variable": "IsAbleToFilter",
								"value": "false"
							}
						},
						{
							"id": "set-text",
							"objectClass": "HelperText",
							"sid": 336147874251174,
							"parameters": {
								"text": "\"Click a filter to resume normal mode ⇧ \"&Newline&\"when you've finished moving cards around\""
							}
						},
						{
							"callFunction": "SetBorderColor",
							"sid": 407588022998628,
							"parameters": [
								"Filter"
							]
						},
						{
							"callFunction": "DivideStacks",
							"sid": 665965201077675
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 330156040155365
						},
						{
							"callFunction": "DetermineWhichCardsAreMoveable",
							"sid": 865570317431613
						}
					],
					"sid": 452257175497556,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Card",
									"sid": 854489824929161,
									"parameters": {
										"instance-variable": "Suit",
										"comparison": 0,
										"value": "Filter"
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "Card",
									"sid": 533940807531707,
									"parameters": {
										"animation": "\"Front\""
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 484355764980492,
									"parameters": {
										"object": "Stack"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "Card",
									"sid": 185719951664596,
									"parameters": {
										"opacity": "50"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 891056974355253,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								}
							],
							"sid": 205392845515325,
							"disabled": true
						}
					]
				},
				{
					"functionName": "ExitFilterMode",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "HelperText",
							"sid": 245739346529102,
							"parameters": {
								"text": "\"When you're finished moving cards around \"&Newline&\"click to deal ⇩\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 902143949228121,
							"parameters": {
								"variable": "Filter",
								"value": "\"\""
							}
						},
						{
							"callFunction": "SetBorderColor",
							"sid": 662808224709647,
							"parameters": [
								"Filter"
							]
						},
						{
							"id": "set-opacity",
							"objectClass": "Card",
							"sid": 631105258747236,
							"parameters": {
								"opacity": "100"
							}
						},
						{
							"callFunction": "RecombineStacks",
							"sid": 916217312469323
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 641658886754430
						},
						{
							"callFunction": "DetermineWhichCardsAreMoveable",
							"sid": 222152492852891
						}
					],
					"sid": 386209239097825,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 412117724281060,
									"parameters": {
										"object": "SuitSelector"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "SuitSelector",
									"sid": 643699243288893,
									"parameters": {
										"opacity": "30"
									}
								}
							],
							"sid": 670301861806515
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Card",
									"sid": 860336916269006,
									"parameters": {
										"animation": "\"Front\""
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 715320037531333,
									"parameters": {
										"object": "Stack"
									}
								}
							],
							"actions": [
								{
									"id": "set-enabled",
									"objectClass": "Card",
									"sid": 559896891135891,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "enabled"
									}
								}
							],
							"sid": 494052519018409,
							"disabled": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 569784042651063,
									"parameters": {
										"object": "Card"
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Card",
									"sid": 194929603815607,
									"parameters": {
										"object": "Stack"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Card",
									"sid": 148515094358547,
									"parameters": {
										"instance-variable": "StackUID",
										"value": "Stack.UID"
									}
								}
							],
							"sid": 881153496175695
						}
					]
				}
			],
			"sid": 389141194759945
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Sound Effects",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 628729585554758,
							"parameters": {
								"object": "Card"
							}
						},
						{
							"id": "pick-topbottom",
							"objectClass": "Card",
							"sid": 746564018549419,
							"parameters": {
								"which": "top"
							}
						},
						{
							"id": "is-enabled",
							"objectClass": "Card",
							"sid": 736287583235973,
							"behaviorType": "DragDrop",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 764702425831552,
							"parameters": {
								"audio-file": "error5",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "flash",
							"objectClass": "Card",
							"sid": 294005636102929,
							"behaviorType": "Flash",
							"parameters": {
								"on-time": "0.1",
								"off-time": "0.1",
								"duration": "0.3"
							}
						}
					],
					"sid": 585812370692562
				},
				{
					"functionName": "PlayCardPlace",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 381973569347227,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "choose(\"cardPlace1\", \"cardPlace2\", \"cardPlace3\", \"cardPlace4\")",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						}
					],
					"sid": 609722329879548
				},
				{
					"functionName": "PlayCardFlip",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 698873202837117,
							"disabled": true,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "choose(\"cardShove2\", \"cardShove3\", \"cardShove4\")",
								"loop": "not-looping",
								"volume": "0",
								"tag-optional": "\"\""
							}
						}
					],
					"sid": 819356474584197
				}
			],
			"sid": 788603253791950
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Click-to-Move",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 373672968805020,
							"parameters": {
								"object": "Card"
							}
						},
						{
							"id": "is-enabled",
							"objectClass": "Card",
							"sid": 792046978818824,
							"behaviorType": "DragDrop"
						},
						{
							"id": "pick-topbottom",
							"objectClass": "Card",
							"sid": 269889328036829,
							"parameters": {
								"which": "top"
							}
						}
					],
					"actions": [
						{
							"callFunction": "CalculatePossibleMoves",
							"sid": 158410464157211,
							"parameters": [
								"Card.Value"
							]
						}
					],
					"sid": 567039614021066
				}
			],
			"sid": 525593031090648
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-mouse-wheel",
					"objectClass": "Mouse",
					"sid": 906191050198167,
					"parameters": {
						"direction": "down"
					}
				}
			],
			"actions": [
				{
					"id": "scroll-to-y",
					"objectClass": "System",
					"sid": 361442211335353,
					"parameters": {
						"y": "CurrentScroll + 10"
					}
				},
				{
					"id": "add-to-eventvar",
					"objectClass": "System",
					"sid": 586645615290660,
					"parameters": {
						"variable": "CurrentScroll",
						"value": "10"
					}
				}
			],
			"sid": 335126838805257
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-mouse-wheel",
					"objectClass": "Mouse",
					"sid": 180937509536945,
					"parameters": {
						"direction": "up"
					}
				}
			],
			"actions": [
				{
					"id": "scroll-to-y",
					"objectClass": "System",
					"sid": 474481699969134,
					"parameters": {
						"y": "CurrentScroll - 10"
					}
				},
				{
					"id": "subtract-from-eventvar",
					"objectClass": "System",
					"sid": 559749223012377,
					"parameters": {
						"variable": "CurrentScroll",
						"value": "10"
					}
				}
			],
			"sid": 125373178136596
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "Stack",
					"sid": 748515455796476,
					"parameters": {
						"instance-variable": "NumberOfCards",
						"comparison": 2,
						"value": "0"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "proooobably should figure out why this happens sometimes"
				},
				{
					"id": "destroy",
					"objectClass": "Stack",
					"sid": 121543182764780
				}
			],
			"sid": 740650994165030,
			"disabled": true
		}
	],
	"sid": 753509500735737
}