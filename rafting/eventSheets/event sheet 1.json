{
	"name": "Event sheet 1",
	"events": [
		{
			"eventType": "variable",
			"name": "FlowSpeed",
			"type": "number",
			"initialValue": "240",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 188979260770229
		},
		{
			"eventType": "variable",
			"name": "PLAYER_SPEED",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 586681508879263
		},
		{
			"eventType": "variable",
			"name": "HasJustSpawned",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 577900422970437
		},
		{
			"eventType": "variable",
			"name": "Score",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 852987325746296
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 819142852653173
				}
			],
			"actions": [
				{
					"id": "set-y",
					"objectClass": "Flow",
					"sid": 182236751187572,
					"parameters": {
						"y": "Flow.Y + FlowSpeed * dt"
					}
				},
				{
					"id": "add-to-eventvar",
					"objectClass": "System",
					"sid": 870261952840904,
					"parameters": {
						"variable": "Score",
						"value": "FlowSpeed / 240 * dt"
					}
				},
				{
					"id": "set-y",
					"objectClass": "Rock",
					"sid": 326731549684908,
					"parameters": {
						"y": "Rock.Y + FlowSpeed * dt"
					}
				}
			],
			"sid": 840467167844024
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 520408619944492,
					"parameters": {
						"interval-seconds": "0.1"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "Score",
					"sid": 848316306262113,
					"parameters": {
						"text": "\"Score: \" & floor(Score)"
					}
				}
			],
			"sid": 354353867611154
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 392989050190170,
					"parameters": {
						"interval-seconds": "240 / FlowSpeed"
					}
				}
			],
			"actions": [
				{
					"callFunction": "PlaceRock",
					"sid": 359943628051166
				}
			],
			"sid": 747604491017597
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-in-touch",
					"objectClass": "Touch",
					"sid": 338797765962593
				}
			],
			"actions": [
				{
					"id": "set-x",
					"objectClass": "Player",
					"sid": 109588097703164,
					"parameters": {
						"x": "Touch.X"
					}
				}
			],
			"sid": 328564280119794
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "Flow",
					"sid": 788462336445334,
					"parameters": {
						"instance-variable": "IsLastSpawned"
					}
				},
				{
					"id": "compare-y",
					"objectClass": "Flow",
					"sid": 192102145467031,
					"parameters": {
						"comparison": 4,
						"y-co-ordinate": "-568"
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 684976425149706,
					"parameters": {
						"variable": "HasJustSpawned"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 781279450416318,
					"parameters": {
						"variable": "HasJustSpawned",
						"value": "true"
					}
				},
				{
					"id": "set-boolean-instvar",
					"objectClass": "Flow",
					"sid": 614844419976444,
					"parameters": {
						"instance-variable": "IsLastSpawned",
						"value": "false"
					}
				},
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 753091640475249,
					"parameters": {
						"type": "log",
						"message": "\"spawn\""
					}
				},
				{
					"callFunction": "SpawnNewFlow",
					"sid": 752846842005139,
					"parameters": [
						"Flow.ImagePointX(\"Top\")",
						"Flow.ImagePointY(\"Top\")"
					]
				}
			],
			"sid": 150344811842739
		},
		{
			"functionName": "PlaceRock",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "is-boolean-instance-variable-set",
					"objectClass": "Flow",
					"sid": 359167336525092,
					"parameters": {
						"instance-variable": "IsLastSpawned"
					}
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "place a rock above the playing field\nif it isn't in a flow, delete it and try again"
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 452568907622143,
					"parameters": {
						"object-to-create": "Rock",
						"layer": "\"Rocks\"",
						"x": "random(LayoutWidth)",
						"y": "Flow.Y + random(Flow.Height)"
					}
				},
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 826486293314395,
					"parameters": {
						"type": "log",
						"message": "\"create rock\""
					}
				},
				{
					"id": "set-animation-frame",
					"objectClass": "Rock",
					"sid": 882121172032647,
					"parameters": {
						"frame-number": "random(Rock.AnimationFrameCount)"
					}
				}
			],
			"sid": 911194025918149,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Rock",
							"sid": 734097338321597,
							"parameters": {
								"object": "Flow"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Rock",
							"sid": 868487657219386
						},
						{
							"callFunction": "PlaceRock",
							"sid": 501578802497657
						}
					],
					"sid": 499474380035486
				}
			]
		},
		{
			"functionName": "SpawnNewFlow",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "BottomX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 848965846705364
				},
				{
					"name": "BottomY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 819942923554924
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 909998337070595,
			"children": [
				{
					"eventType": "variable",
					"name": "LastSpawnedUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 719749869309216
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 558578940138490,
							"parameters": {
								"object-to-create": "Flow",
								"layer": "\"Water\"",
								"x": "-600",
								"y": "-600"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 955420242591657,
							"parameters": {
								"variable": "LastSpawnedUID",
								"value": "Flow.UID"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "Flow",
							"sid": 435912167585407,
							"parameters": {
								"frame-number": "random(Flow.AnimationFrameCount)"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Flow",
							"sid": 406143533876138,
							"parameters": {
								"x": "BottomX + (Flow.X - Flow.ImagePointX(\"Bottom\"))",
								"y": "BottomY - Flow.Height"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Flow",
							"sid": 659880369426873,
							"parameters": {
								"instance-variable": "IsLastSpawned",
								"value": "true"
							}
						},
						{
							"callFunction": "CheckAndCorrectNewFlowPosition",
							"sid": 332832102432472,
							"parameters": [
								"BottomX",
								"BottomY",
								"Flow.UID"
							]
						}
					],
					"sid": 857236912272896
				}
			]
		},
		{
			"functionName": "CheckAndCorrectNewFlowPosition",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "BottomX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 612701639514181
				},
				{
					"name": "BottomY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 189755518834182
				},
				{
					"name": "FlowUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 694516697429624
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "Flow",
					"sid": 764739144180236,
					"parameters": {
						"unique-id": "FlowUID"
					}
				}
			],
			"actions": [],
			"sid": 882569829879357,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "Flow",
							"sid": 783662683962658,
							"parameters": {
								"comparison": 2,
								"x-co-ordinate": "0"
							}
						},
						{
							"id": "compare-x",
							"objectClass": "Flow",
							"sid": 335635426285064,
							"parameters": {
								"comparison": 4,
								"x-co-ordinate": "LayoutWidth"
							}
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 371941786496103,
							"parameters": {
								"type": "log",
								"message": "\"checking\""
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "Flow",
							"sid": 594890887810016,
							"parameters": {
								"frame-number": "random(Flow.AnimationFrameCount)"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Flow",
							"sid": 476794074272175,
							"parameters": {
								"x": "BottomX + (Flow.X - Flow.ImagePointX(\"Bottom\"))",
								"y": "BottomY - Flow.Height"
							}
						},
						{
							"callFunction": "CheckAndCorrectNewFlowPosition",
							"sid": 760611150700207,
							"parameters": [
								"BottomX",
								"BottomY",
								"Flow.UID"
							]
						}
					],
					"sid": 443675170821582,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 922786560954790
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 115782388869696,
							"parameters": {
								"type": "log",
								"message": "\"stopping\""
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 106046243353716,
							"parameters": {
								"variable": "HasJustSpawned",
								"value": "false"
							}
						}
					],
					"sid": 562955760174468
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-overlapping-another-object",
					"objectClass": "Player",
					"sid": 813481576397183,
					"parameters": {
						"object": "Flow"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"callFunction": "Die",
					"sid": 633501904849054
				}
			],
			"sid": 689126920991430
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-overlapping-another-object",
					"objectClass": "Player",
					"sid": 108099533329797,
					"parameters": {
						"object": "Rock"
					}
				}
			],
			"actions": [
				{
					"callFunction": "Die",
					"sid": 245364526926937
				}
			],
			"sid": 539516525992229
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 868816863517182,
					"parameters": {
						"interval-seconds": "random(2)"
					}
				}
			],
			"actions": [
				{
					"id": "log",
					"objectClass": "Browser",
					"sid": 598766153516701,
					"parameters": {
						"type": "log",
						"message": "\"spawn wave\""
					}
				},
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 187052500947374,
					"parameters": {
						"object-to-create": "Wave",
						"layer": "\"Waves\"",
						"x": "random(LayoutWidth)",
						"y": "random(LayoutHeight)"
					}
				},
				{
					"id": "start-fade",
					"objectClass": "Wave",
					"sid": 166086555215300,
					"behaviorType": "Fade"
				},
				{
					"id": "tween-one-property",
					"objectClass": "Wave",
					"sid": 271956442827135,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"\"",
						"property": "offsetY",
						"end-value": "Wave.Y + random(LayoutHeight - Wave.Y)",
						"time": "5",
						"ease": "easeinoutsine",
						"destroy-on-complete": "yes"
					}
				}
			],
			"sid": 644612557761482
		},
		{
			"functionName": "Die",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 395298888956404,
					"parameters": {
						"variable": "Score",
						"value": "0"
					}
				},
				{
					"id": "flash",
					"objectClass": "Player",
					"sid": 242506832356034,
					"behaviorType": "Flash",
					"parameters": {
						"on-time": "0.1",
						"off-time": "0.1",
						"duration": "1.0"
					}
				},
				{
					"id": "set-x",
					"objectClass": "Player",
					"sid": 754375326094307,
					"parameters": {
						"x": "Flow.X"
					}
				},
				{
					"type": "comment",
					"text": "TODO: instead, actually remove the player and then replace it when at the origin of a flow the origin of the flow is at Player.Y. maybe add a couple seconds of invincibility (while it's flashing in)"
				}
			],
			"sid": 722095536864805
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Destroy things",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-y",
							"objectClass": "Flow",
							"sid": 412011131988267,
							"parameters": {
								"comparison": 4,
								"y-co-ordinate": "LayoutHeight"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Flow",
							"sid": 747618881708774
						}
					],
					"sid": 330607094566990
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-y",
							"objectClass": "Wave",
							"sid": 838733660071513,
							"parameters": {
								"comparison": 4,
								"y-co-ordinate": "LayoutHeight"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Wave",
							"sid": 437788786109678
						}
					],
					"sid": 885252260330948
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-y",
							"objectClass": "Rock",
							"sid": 427842698709350,
							"parameters": {
								"comparison": 4,
								"y-co-ordinate": "LayoutHeight"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Rock",
							"sid": 616526104592457
						}
					],
					"sid": 769960096145843
				}
			],
			"sid": 131342598953940
		}
	],
	"sid": 727418258800743
}