{
	"name": "eGame",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "eGameAudio"
		},
		{
			"eventType": "include",
			"includeSheet": "eGameUI"
		},
		{
			"eventType": "variable",
			"name": "ZoomToSeeAll",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 597399059347788
		},
		{
			"eventType": "variable",
			"name": "ScreenshotMode",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 304110585315317
		},
		{
			"eventType": "variable",
			"name": "IsMoving",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 465586430072531
		},
		{
			"eventType": "variable",
			"name": "LAST_LEVEL",
			"type": "string",
			"initialValue": "Desert 1",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 696303407471789
		},
		{
			"eventType": "variable",
			"name": "SPEED",
			"type": "number",
			"initialValue": "300",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 209240244709285
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 619881203470120
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 455166491598991,
					"parameters": {
						"variable": "ZoomToSeeAll",
						"value": "min(ViewportWidth(\"Tiles\")/LayoutWidth, ViewportHeight(\"Tiles\")/LayoutHeight)"
					}
				},
				{
					"id": "set-max-speed",
					"objectClass": "Player",
					"sid": 226437367962448,
					"behaviorType": "8Direction",
					"parameters": {
						"max-speed": "SPEED"
					}
				},
				{
					"id": "set-deceleration",
					"objectClass": "Player",
					"sid": 523245743723948,
					"behaviorType": "8Direction",
					"parameters": {
						"deceleration": "0"
					}
				}
			],
			"sid": 250742342554707
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-overlapping-another-object",
					"objectClass": "Player",
					"sid": 520133812688397,
					"parameters": {
						"object": "Tile"
					}
				},
				{
					"id": "is-overlapping-another-object",
					"objectClass": "Player",
					"sid": 325149463529377,
					"parameters": {
						"object": "Paint"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "create-object",
					"objectClass": "System",
					"sid": 972068980640360,
					"parameters": {
						"object-to-create": "Paint",
						"layer": "\"Tiles\"",
						"x": "Tile.X",
						"y": "Tile.Y"
					}
				},
				{
					"id": "move-to-bottom",
					"objectClass": "Paint",
					"sid": 290045036316013
				}
			],
			"sid": 422501087760690
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-moving",
					"objectClass": "Player",
					"sid": 586368637595893,
					"behaviorType": "8Direction"
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 866546244387022,
					"parameters": {
						"variable": "IsMoving"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-speed",
					"objectClass": "Player",
					"sid": 321295675130443,
					"behaviorType": "8Direction",
					"parameters": {
						"speed": "SPEED"
					}
				},
				{
					"id": "set-ignoring-input",
					"objectClass": "Player",
					"sid": 888868364626995,
					"behaviorType": "8Direction",
					"parameters": {
						"input": "start-ignoring"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "Player",
					"sid": 172133298997458,
					"parameters": {
						"animation": "\"Walking\"",
						"from": "beginning"
					}
				},
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 875915930058284,
					"parameters": {
						"variable": "IsMoving",
						"value": "true"
					}
				}
			],
			"sid": 983531768149725
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-collision-with-another-object",
					"objectClass": "Player",
					"sid": 357884271736635,
					"parameters": {
						"object": "Barrier"
					}
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 411551622476576,
					"parameters": {
						"variable": "IsMoving"
					}
				}
			],
			"actions": [
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 709014929138240,
					"parameters": {
						"variable": "IsMoving",
						"value": "false"
					}
				},
				{
					"id": "set-speed",
					"objectClass": "Player",
					"sid": 854481816430251,
					"behaviorType": "8Direction",
					"parameters": {
						"speed": "0"
					}
				},
				{
					"id": "set-ignoring-input",
					"objectClass": "Player",
					"sid": 261068364745148,
					"behaviorType": "8Direction",
					"parameters": {
						"input": "stop-ignoring"
					}
				},
				{
					"id": "set-animation",
					"objectClass": "Player",
					"sid": 544752339248866,
					"parameters": {
						"animation": "\"Idle\"",
						"from": "beginning"
					}
				}
			],
			"sid": 505401212425416,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 362847754193894,
							"parameters": {
								"object": "Coin"
							}
						}
					],
					"actions": [
						{
							"id": "set-ignoring-input",
							"objectClass": "Player",
							"sid": 340901264497930,
							"behaviorType": "8Direction",
							"parameters": {
								"input": "start-ignoring"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Player",
							"sid": 226276877041488,
							"behaviorType": "ScrollTo",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-key",
							"objectClass": "LevelsCompleted",
							"sid": 323885917127116,
							"parameters": {
								"key": "LayoutName",
								"value": "\"true\""
							}
						},
						{
							"id": "set-layer-parallax",
							"objectClass": "System",
							"sid": 127458208707829,
							"parameters": {
								"layer": "\"Parallax Near\"",
								"parallax-x": "100",
								"parallax-y": "100"
							}
						},
						{
							"id": "set-layer-parallax",
							"objectClass": "System",
							"sid": 476098549645915,
							"parameters": {
								"layer": "\"Parallax Far\"",
								"parallax-x": "100",
								"parallax-y": "100"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 276975617281826,
							"parameters": {
								"seconds": "3"
							}
						},
						{
							"id": "destroy",
							"objectClass": "Coin",
							"sid": 690161793296152
						},
						{
							"callFunction": "MakeUIVisible",
							"sid": 359275861208947
						}
					],
					"sid": 393958547417339
				}
			]
		},
		{
			"eventType": "comment",
			"text": "TODO: also try qarp and cubic instead of lerp"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-overlapping-another-object",
					"objectClass": "Player",
					"sid": 220499789407317,
					"parameters": {
						"object": "Coin"
					}
				}
			],
			"actions": [
				{
					"id": "set-layout-scale",
					"objectClass": "System",
					"sid": 908343511151222,
					"parameters": {
						"scale": "lerp(LayoutScale, ZoomToSeeAll ,0.025)"
					}
				},
				{
					"id": "scroll-to-x",
					"objectClass": "System",
					"sid": 502287901316624,
					"parameters": {
						"x": "lerp(Player.X, LayoutWidth / 2, 0.025)"
					}
				},
				{
					"id": "scroll-to-y",
					"objectClass": "System",
					"sid": 245669505511889,
					"parameters": {
						"y": "lerp(Player.Y, LayoutHeight / 2, 0.025)"
					}
				}
			],
			"sid": 666524158935041
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Alternate controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "TouchAngle",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 592924006185926
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-in-touch",
							"objectClass": "Touch",
							"sid": 571322067865683
						},
						{
							"id": "compare-touch-speed",
							"objectClass": "Touch",
							"sid": 499760441817119,
							"parameters": {
								"touch-index": "0",
								"comparison": 5,
								"speed": "200"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 794128780242403,
							"parameters": {
								"variable": "TouchAngle",
								"value": "Touch.AngleAt(0)"
							}
						}
					],
					"sid": 614410476321956,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-between-angles",
									"objectClass": "System",
									"sid": 744034046764735,
									"parameters": {
										"angle": "TouchAngle",
										"first-angle": "250",
										"second-angle": "290"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 177151708815278,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "up"
									}
								}
							],
							"sid": 662152857298480
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-between-angles",
									"objectClass": "System",
									"sid": 226000830037855,
									"parameters": {
										"angle": "TouchAngle",
										"first-angle": "160",
										"second-angle": "200"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 434797220969271,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "left"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 387347525128236,
									"parameters": {
										"state": "mirrored"
									}
								}
							],
							"sid": 390248934932426
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-between-angles",
									"objectClass": "System",
									"sid": 247620876589224,
									"parameters": {
										"angle": "TouchAngle",
										"first-angle": "70",
										"second-angle": "110"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 352083382917064,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "down"
									}
								}
							],
							"sid": 540759638546347
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-between-angles",
									"objectClass": "System",
									"sid": 206972057875829,
									"parameters": {
										"angle": "TouchAngle",
										"first-angle": "340",
										"second-angle": "20"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 217727881476901,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "right"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 384090237431233,
									"parameters": {
										"state": "not-mirrored"
									}
								}
							],
							"sid": 156334008382184
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 460946653024283,
							"parameters": {
								"key": 87
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 233875820096590,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "up"
							}
						}
					],
					"sid": 377631978281733,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 639311539249962,
							"parameters": {
								"key": 65
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 178904432544681,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "left"
							}
						},
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 612378527148262,
							"parameters": {
								"state": "mirrored"
							}
						}
					],
					"sid": 939899444361301,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 679998769203734,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 551721341451436,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "down"
							}
						}
					],
					"sid": 866763276314107,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 942577064311108,
							"parameters": {
								"key": 68
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 136170511577813,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "right"
							}
						},
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 214269556901836,
							"parameters": {
								"state": "not-mirrored"
							}
						}
					],
					"sid": 957225848929388,
					"isOrBlock": true
				}
			],
			"sid": 302494974595170
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Animations",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 832574585770849,
							"parameters": {
								"key": 37
							}
						}
					],
					"actions": [
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 455713030345392,
							"parameters": {
								"state": "mirrored"
							}
						}
					],
					"sid": 204949921240348
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 477565145857347,
							"parameters": {
								"key": 39
							}
						}
					],
					"actions": [
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 107446358786501,
							"parameters": {
								"state": "not-mirrored"
							}
						}
					],
					"sid": 895446186857991
				}
			],
			"sid": 906707102171307
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debug",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 105865593978233,
							"parameters": {
								"variable": "ScreenshotMode"
							}
						},
						{
							"id": "is-in-preview",
							"objectClass": "System",
							"sid": 920927214834268
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "Player",
							"sid": 950048159577098,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Player",
							"sid": 802795423992665,
							"behaviorType": "ScrollTo",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "Paint",
							"sid": 762245256510761,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-background-color",
							"objectClass": "System",
							"sid": 699184312947991,
							"parameters": {
								"layer": "\"Tiles\"",
								"color": "rgbEx255(255,255,255)"
							}
						},
						{
							"id": "set-layer-transparent",
							"objectClass": "System",
							"sid": 652343974441933,
							"parameters": {
								"layer": "\"Tiles\"",
								"mode": "opaque"
							}
						},
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 340654918531619,
							"parameters": {
								"x": "LayoutWidth / 2",
								"y": "LayoutHeight / 2"
							}
						},
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 801001909560118,
							"parameters": {
								"scale": "lerp(LayoutScale, ZoomToSeeAll ,1)"
							}
						}
					],
					"sid": 829862929035108
				}
			],
			"sid": 414333881449413
		}
	],
	"sid": 341145607795163
}